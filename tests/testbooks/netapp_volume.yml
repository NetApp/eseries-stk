---
- name: SANtricity Pool
  hosts: local
  gather_facts: False
  connection: local

  vars:
    #test parameters
    pool_name: testa
    raid_level: raid1
    state: present
    volume_name:  testb

    # array specific variables
    api_ip:  10.113.174.187

    # common defaults
    api_username: admin@local
    api_password: infiniti

    # usually constant
    ssid: 1
    api_url: https://{{ api_ip }}/devmgr/v2
    validate_certs: False

  tasks:
    - name: Make a Volume
      netapp_e_volume:
        name: "{{ volume_name }}"
        state: "{{ state }}"
        log_path: /tmp/volume.log
        ssid: "{{ ssid }}"
        api_url: "{{ api_url }}"
        api_username: "{{ api_username }}"
        api_password: "{{ api_password }}"
        validate_certs: "{{ validate_certs}}"
        storage_pool_name: "{{ pool_name }}"
        size: 2
